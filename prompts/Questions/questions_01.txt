These 20 questions are designed to make you deeply understand DG TS as a canonical electronic exchange, its MVP proto set, its deterministic behavior, risk/compliance requirements, and how to start coding a real system. They mix conceptual, design, and implementation challenges.

---

## DG TS — 20 Deep Understanding Questions

### 1–5: Market Mechanics

1. How does a continuous double auction work in a canonical way, independent of NASDAQ or MICEX quirks?
2. What are the minimal order fields required to reconstruct all trades and replay the order book?
3. How should the order book state be represented so that snapshots and incremental updates are deterministic and replayable?
4. How does the system handle simultaneous order submissions at the same price? Which tie-breaking rule ensures reproducibility?
5. How is market clearing price determined from the canonical order book during a match?

---

### 6–10: System Architecture & Proto Design

6. Which proto files correspond to each service boundary, and how do you enforce single responsibility per proto/service?
7. How do you version proto files so that schema changes do not break production or replayability?
8. How will gRPC endpoints be structured to support deterministic, idempotent order submission and trade events?
9. What state machine (FSM) definitions are required for orders and trades, and how will transitions be validated?
10. How do you handle an emergency kill switch in the matching engine or trading service?

---

### 11–15: Observability, Audit, & Compliance

11. Which events must be logged to guarantee auditability for regulators and internal replay?
12. How do you replay a historical order stream to reproduce the order book and trades exactly?
13. How will you track system latency and throughput per service to meet MVP SLAs?
14. What critical KPIs should you calculate in MVP telemetry (e.g., trade throughput, matching latency, failed orders)?
15. How will order cancellations, partial fills, and failed trades be reflected in the audit log to ensure regulatory compliance?

---

### 16–20: Risk, Determinism, and Start Coding

16. How do you enforce deterministic candidate selection in the matching engine (seeded randomness, tie-breaking rules)?
17. How will you prevent a single participant from submitting conflicting orders that could violate the canonical rules?
18. How should proto messages and events be structured to support both real-time processing and replay without modification?
19. What unit tests and integration tests are essential before your first MVP deployment?
20. If you were to start coding today, what is the smallest end-to-end flow (proto → gRPC → matching → trade → audit) you can implement to have a working prototype?
